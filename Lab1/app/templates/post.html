{% extends 'base.html' %}

{% block content %}
<h1 class="mt-5">{{ title }}</h1>
<h5 class="text-muted">{{ post.author }}, {{ post.date.strftime('%d.%m.%Y') }}</h5>
<div class="row my-3">
    <img class="rounded mx-auto d-block w-75" src="{{ url_for('static', filename='images/' + post.image_id) }}"
        alt="Card image cap">
</div>
<div class="row my-3">
    <p class="post-text">{{ post.text }}</p>
</div>
<div class="row my-3 border rounded">
    <form>
        <div class="row border-bottom py-2 bg-light">
            <label for="exampleFormControlTextarea1" class="form-label d-block">Оставьте
                комментарий</label>
        </div>
        <div class="my-3">
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary mb-3">Отправить</button>
    </form>
</div>
<div class="row my-3">

    {% for comment in post.comments %}
    <div class="d-flex">
        <div class="flex-shrink-0">
            <img src="{{ url_for('static', filename='images/avatar.jpg') }}" class="rounded-circle" alt="Sample Image"
                height="64px">
        </div>
        <div class="flex-grow-1 ms-3">
            <h5> {{ comment.author }} </h5>
            <p> {{ comment.text }}</p>
            {% for reply in comment.replies %}
            <div class="d-flex mt-4">
                <div class="flex-shrink-0">
                    <img src="{{ url_for('static', filename='images/avatar.jpg') }}" class="rounded-circle"
                        alt="Sample Image" height="64px">
                </div>
                <div class="flex-grow-1 ms-3">
                    <h5> {{ reply.author }} </h5>
                    <p> {{ reply.text }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <!-- <div class="d-flex">
        <div class="flex-shrink-0">
            <img src="{{ url_for('static', filename='images/avatar.jpg') }}" class="rounded-circle" alt="Sample Image"
                height="128px">
        </div>
        <div class="flex-grow-1 ms-3">
            <h5>Jhon Carter <small class="text-muted"><i>Posted on January 10, 2021</i></small></h5>
            <p>Excellent feature! I love it. One day I'm definitely going to put this Bootstrap component into use and
                I'll
                let you know once I do.</p>
        </div>
    </div> -->
    {% endfor %}
</div>
{% endblock %}